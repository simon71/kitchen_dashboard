<!DOCTYPE html>
<html>
<head>
<title>Magic Mirror</title>
<meta name="author" content="simon harvey">
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="stylesheet">
<meta http-equiv="expires" content="0">
<meta http-equiv="cache" content="no-cache">
<meta http-equiv="refresh" content="3600">
<Link rel="stylesheet" type="text/css" href="style.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<!-- <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.min.js"></script> -->
</head>
<body class="body">
	<div id="body" class="body">
		<div id="main" class="main">
			<div id="time_date">
				<div id="date"></div>
				<div id="time"></div>
			</div>
			<div id="today_weather">
				<div id="location" class="weather_text">Llangefni</div>
				<div id="today_conditions" class="weather_text"></div>
				<div id="today_img" class="weather_text"></div>
				<div id="today_temp" class="weather_text"></div>
				<div id="today_humidity" class="weather_text"></div>
				<div id="today_windSpeed" class="weather_text"></div>
				<div id="today_windDirection" class="weather_text"></div>
			</div>
		</div>
		<div id="weather_main" class="weather">
				<table>
					<tbody>
							<tr id="hrly" class="post"></tr>
					</tbody>
				</table>
		</div>
	</div>
		<script type="text/javascript">

		$(document).ready(function() {

			tday=new Array("Sunday,","Monday,","Tuesday,","Wednesday,","Thursday,","Friday,","Saturday,");
			tmonth=new Array("January","Feburary","March","April","May","June","July","August","September","October","November","December");

			function GetClock(){
				var d=new Date();
				var nday=d.getDay(),nmonth=d.getMonth(),ndate=d.getDate(),nyear=d.getYear();
				if(nyear<1000) nyear+=1900;
				var nhour=d.getHours(),nmin=d.getMinutes(),nsec=d.getSeconds(),ap;

				if(nhour==0){ap=" AM";nhour=12;}
				else if(nhour<12){ap=" AM";}
				else if(nhour==12){ap=" PM";}
				else if(nhour>12){ap=" PM";nhour-=12;}

				if(nmin<=9) nmin="0"+nmin;
				if(nsec<=9) nsec="0"+nsec;


				document.getElementById('time').innerHTML=nhour+":"+nmin+" ";
				document.getElementById('date').innerHTML=tday[nday]+" "+ndate+" "+tmonth[nmonth];
			}

			window.onload=function(){
				GetClock();
				setInterval(GetClock,1000);
			}

				var weather_data=[];
					$.getJSON("weather_data_post.json", function(data){
						$.each(data, function(key,val){
								weather_data.push(key+'":"'+val[1]);
						});
					});
					$.getJSON("weather_data_pre.json", function(data){
						$.each(data, function(key,val){
								weather_data.push(key+'":"'+val[1]);
						});
					});
					$.getJSON("weather_data_tomorrow_post.json", function(data){
						$.each(data, function(key,val){
								weather_data.push(key+'":"'+val[1]);
						});
					});

					console.log(weather_data);



			$.getJSON("weather_data_post.json", function(data){

				var d = new Date();
				var n = d.getUTCHours()+1;
						if (n.length==1){
							n="0"+n+':00';
						} else{
							n=n+':00';
						};


				$.each(data, function(k,v){

					if (k == n){
						document.getElementById('today_temp').innerHTML=v[2]+'<sup>o</sup><span class="deg">C</span>';
						document.getElementById('today_conditions').innerHTML=v[0];
						document.getElementById('today_humidity').innerHTML='Humidity: '+v[3];
						document.getElementById('today_windSpeed').innerHTML='Wind Speed: '+v[4];
						document.getElementById('today_windDirection').innerHTML='Wind Direction: '+v[5];
						document.getElementById('today_img').innerHTML="<img class='main_img' src='Images\\"+v[1]+"'>"
					};
				});

			});
		});
		</script>
</body>

</html>
