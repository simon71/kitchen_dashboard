<!DOCTYPE html>
<html>
<head>
<title>Magic Mirror</title>
<meta name="author" content="simon harvey">
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="stylesheet">
<meta http-equiv="expires" content="0">
<meta http-equiv="cache" content="no-cache">
<meta http-equiv="refresh" content="3600">
<link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet"><!-- text font-->
<link href="https://fonts.googleapis.com/css?family=Orbitron" rel="stylesheet"><!--clock font-->
<Link rel="stylesheet" type="text/css" href="style.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>
<body class="body">
	<div id="body" class="body">
		<div id="main" class="main">
			<div id="time_date">
				<div id="date"></div>
				<div id="time"></div>
			</div>
			<div id="today_weather">
				<div id="location" class="weather_text">Llangefni</div>
				<div id="today_conditions" class="weather_text"></div>
				<div id="today_img" class="weather_text"></div>
				<div id="today_temp" class="weather_text"></div>
				<div id="lable">Humidity:</div><div id="today_humidity" class="weather_text"></div>
				<div id="lable">Wind Speed:</div><div id="today_windSpeed" class="weather_text"></div>
				<div id="lable">Wind Direction:</div><div id="today_windDirection" class="weather_text"></div>
				<div id="lable">Sun Rise:</div><div id="today_sunRise" class="weather_text"></div>
				<div id="lable">Sun Set:</div><div id="today_sunSet" class="weather_text"></div>
				<div id="wkWeather">
					<table id="ww">
						<tc id='day'></tc>
						<!--<tc id='img'></tc>
						<tc id='temph'></tc>
						<tc id='templ'></tc>
						<tc id='wind'></tc>
						<tc id='winds'></tc>
						<tc id='windd'></tc>
						<tc id="Wimg"></tc> -->
					</table>
				</div>
			</div>

		</div>
		<div id="weather_main" class="weather">
				<table>
					<tbody>
					</tbody>
				</table>
		</div>
	</div>
		<script type="text/javascript">

		$(document).ready(function() {

			tday=new Array("Sunday,","Monday,","Tuesday,","Wednesday,","Thursday,","Friday,","Saturday,");
			tmonth=new Array("January","Feburary","March","April","May","June","July","August","September","October","November","December");

			function GetClock(){
				var d=new Date();
				var nday=d.getDay(),nmonth=d.getMonth(),ndate=d.getDate(),nyear=d.getYear();
				if(nyear<1000) nyear+=1900;
				var nhour=d.getHours(),nmin=d.getMinutes(),nsec=d.getSeconds(),ap;

				if(nhour<=9) nhour="0"+nhour;

				if(nmin<=9) nmin="0"+nmin;
				if(nsec<=9) nsec="0"+nsec;


				document.getElementById('time').innerHTML=nhour+":"+nmin+" ";
				document.getElementById('date').innerHTML=tday[nday]+" "+ndate+" "+tmonth[nmonth];
			}



			window.onload=function(){
				GetClock();
				setInterval(GetClock,1000);
			}

			$.getJSON("jsonData/weather_data_post.json", function(data){

				var d = new Date();
				var sh = d.getUTCHours()+1;
						n = "00:00"
						if (sh<10){
							n="0"+sh+':00';
						} else{
							n=sh+':00';
						};

						console.log(sh)
    			$.each(data, function(k,v){

    				if (k == n){
    					document.getElementById('today_temp').innerHTML=v[2]+'<sup>o</sup><span class="deg">C</span>';
    					document.getElementById('today_conditions').innerHTML=v[0];
    					document.getElementById('today_humidity').innerHTML=v[3];
    					document.getElementById('today_windSpeed').innerHTML=v[4]+'<style="font-size:8px"> mph</style>';
    					document.getElementById('today_windDirection').innerHTML=v[5];
    					document.getElementById('today_img').innerHTML="<img class='main_img' src='Images\\"+v[1]+"'>";
    				};
    			});
			});

			$.getJSON("jsonData/sun_rise.json", function(data){
				$.each(data, function(key,value){
					document.getElementById('today_sunRise').innerHTML=value;
				});
			});

			$.getJSON("jsonData/sun_set.json", function(data){
				$.each(data, function(key,value){
					document.getElementById('today_sunSet').innerHTML=value;
				});
			});

			$.getJSON("jsonData/wkforecast.json", function(data){
				$.each(data, function(k, v){
					$('#ww').append("<tc>")
					$('#ww').append("<tr><td>"+v[0]+"</td></tr>");
					//$('#temph').append("<tr><td>High "+v[2]+"<sup>o</sup>C</td></tr>");
					// $('#templ').append("<td>Low "+v[3]+"<sup>o</sup>C</td>");
					// $('#wind').append("<td>"+"Wind"+"</td>");
					// $('#winds').append("<td>"+v[4]+" mph</td>");
					// $('#windd').append("<td>"+v[5]+"</td>");
					$('#ww').append("<tr><tc><td>"+"<img src='Images\\"+v[6]+"'>"+"</td></tc></tr>");
					// $('#Wimg').append("<td>"+"<img src='Images\\"+v[7]+"'>"+"</td>");
					$('#ww').append("</tc>")
				});
			});

            $.getJSON("jsonData/weather_data_post.json", function(data){
      			$.each(data, function(key,val){
      					$('#weather_main').append("<td>"+key+"</br>"+"<img src='Images\\"+val[1]+"'>"+"</td>");
      			});
      		});
			 $.getJSON("jsonData/weather_data_post1.json", function(data){
					$.each(data, function(key,val){
							$('#weather_main').append("<td>"+key+"</br>"+"<img src='Images\\"+val[1]+"'>"+"</td>");
					});
				});

        });




		</script>
</body>

</html>
